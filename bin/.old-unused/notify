#!/bin/bash
#
# notify - Display notifications using bar
# Original author: onodera, https://github.com/onodera-punpun
# Sorbet, https://github.com/Sorebit

## CONFIGURATION

# Set colors
bg="e0e0e0"
fg="202020"
tm=4

## EXECUTE

if [ $# -ge 1 ]; then
	while [ $# -ge 1 ]
	do
		case "$1" in
			-h|--help)
				echo "usage: notify [options] [message]"
				echo "options:"
				echo "  -v,   --version             print version and exit"
				echo "  -h,   --help                print help and exit"
				echo "  -t,   --timeout             set timeout in seconds"
				exit 0
				;;
			-v|--version)
				echo "notify 0.4-sorbet"
				exit 0
				;;
			-t|--timeout)
				if [ $# -gt 2 ]; then
					tm=$2
					shift 2
				elif [ $# -eq 2 ]; then
					echo "No message specified"
					exit 1
				else
					echo "No argument given for option $1"
					exit 1
				fi
				;;
			*)
				if [ $# -eq 1 ]; then
					break
				fi

				echo "Unknown option \"$1\""
				exit 1
				;;
		esac
	done

	# Kill old notifycation
	pkill -f -n "920x30"
		
	# Display notifcation
	(echo "%{B#ff$bg}%{r}       $1       " ; sleep $tm ) |
	lemonbar -g 920x30+962+52 -d -f "System San Francisco Display:size=12" -B \#00$bg -F \#FF$fg | bash & disown
else
	echo "No message specified"
	exit 1
fi


