#!/bin/bash
#
# wallpaper - set a random wallpaper from folder, specified file or url
# sorbet, https://github.com/sorebit

dir="$HOME/.wallpapers"

if [[ $# -lt 1 ]]; then
	wallpaper="$dir/$(ls "$dir" | shuf -n 1)"
else
	case "$1" in
		-h|--help)
			echo "Wallpaper - set a random wallpaper from folder, specified file or url"
			echo "Usage: wallpaper [options]"
			echo "  -h|--help               - show this help page and exit."
			echo "  -i|--image <file>       - set wallpaper from specified image"
			echo "  -u|--url   [url] <file> - download to temporaryand set wallpaper from url"
			echo "                            (optional directory to save it in)"
			echo "  no options              - set random wallpaper from $dir"
			exit 0
			;;
		-u|--url)
			if [[ -n $3 ]]; then
				wallpaper="$3/downloaded-wallpaper" 
			else
				wallpaper="/tmp/dlwp"
			fi
			wget -O "$wallpaper" "$2"
			;;
		-i|--image)
			if [[ -n $2 ]];then
				wallpaper="$2"
			else
				echo "No filename specified."
				exit 1
			fi
			;;
	esac
fi

feh --bg-fill $wallpaper
echo -e "Wallpaper set, $wallpaper."
